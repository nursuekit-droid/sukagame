<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SukaGame</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Pi SDK -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
  <script>
    Pi.init({
      version: "2.0",
      sandbox: false // üî¥ ÿßÿ¨ÿπŸÑŸáÿß false ÿ•ÿ∞ÿß ŸÉŸÜÿ™ ŸÅŸä Production
    });
  </script>
</head>

<body style="text-align:center; font-family: Arial, sans-serif; margin-top:50px;">

  <h1>üéÆ SukaGame</h1>
  <p>Pi Network App</p>

  <button onclick="loginWithPi()" style="padding:12px 20px; font-size:16px;">
    Login with Pi
  </button>

  <br><br>

  <button onclick="pay()" style="padding:12px 20px; font-size:16px;">
    Pay 0.01 Pi
  </button>

  <p id="result" style="margin-top:20px;"></p>

  <script>

    let currentUser;

    async function loginWithPi() {
      try {
        const auth = await Pi.authenticate(
          ['username', 'payments'],
          function(payment) {
            console.log("Incomplete payment found:", payment);
          }
        );

        currentUser = auth.user.username;
        document.getElementById("result").innerText =
          "Welcome " + currentUser;

      } catch (error) {
        document.getElementById("result").innerText =
          "Login failed: " + error;
      }
    }

    async function pay() {
      try {

        const payment = await Pi.createPayment({
          amount: 0.01,
          memo: "Test Payment - SukaGame",
          metadata: { productId: "suka_test_001" }
        }, {
          onReadyForServerApproval: function(paymentId) {
            console.log("Ready for approval:", paymentId);
          },

          onReadyForServerCompletion: function(paymentId, txid) {
            console.log("Ready for completion:", paymentId, txid);
          },

          onCancel: function(paymentId) {
            console.log("Payment cancelled");
          },

          onError: function(error) {
            console.error(error);
          }
        });

      } catch (error) {
        console.error(error);
      }
    }

  </script>

</body>
</html>
